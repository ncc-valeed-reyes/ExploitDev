## ShiftExample1.c

### Source Code:

```c
unsigned int main() {
  unsigned int a, b, c;
  a = 0x5;
  b = a << 4;
  c = b >> 3;
  return c;
}
```

### Disassembly:

#### Frame 1: ShiftExample1.exe!func(...)
```assembly
sub rsp, 18h
mov dword ptr [rsp], 5
mov eax, dword ptr [rsp]
shl eax, 4
mov dword ptr [rsp+4], eax
mov eax, dword ptr [rsp+4]
shr eax, 3
mov dword ptr [rsp+8], eax
mov eax, dword ptr [rsp+8]
add rsp, 18h
ret
```

## Analyzing the stack

### Return address to `ShiftExample1.exe!invoke_main(void)`

|Address|Value|
|-------------|-------------|
|0x000000000014FE0C|00000001|
|0x000000000014FE08|40001349|

### 16 byte alignment

|Address|Value|
|-------------|-------------|
|0x000000000014FE04|c2da2203|
|0x000000000014FE00|178bfbff|
|0x000000000014FDFC|000007ea|

### 0x5 << 3

|Address|Value|
|-------------|-------------|
|0x000000000014FDF8|0000000A|

### 0x5 >> 4

|Address|Value|
|-------------|-------------|
|0x000000000014FDF4|000000050|

### Initialized 0x5 value

|Address|Value|
|-------------|-------------|
|0x000000000014FDF0|00000005|


## Breaking down each statements

### Frame 1: ShiftExample1.exe!main(...)

`sub rsp, 18h`
 - Subracts `rsp` by 18
 - 000000000014FE08 - 18
 - Address of `rsp`: 000000000014FDF0

`mov dword ptr [rsp], 5`
 - Moves 5 into `rsp` register
 - Address of `rsp`: 000000000014FDF0
 - Value of `rsp` (4 bytes): 00000005

`mov eax, dword ptr [rsp]`
 - Moves value of the `rsp` register into `rax` register

`shl eax, 4`
 - Shifts left eax by 4
 - 5 << 4 = 50
 - New value of `rax`: 0000000000000050

`mov dword ptr [rsp+4], eax`
 - Moves `rax` register value into `rsp` register with an offset of 4
 - Address of `rsp`: 000000000014FDF4
 - Value of `rsp` (4 bytes): 00000050

`mov eax, dword ptr [rsp+4]`
 - Moves the `rsp` value into `rax` register
 - Address of `rsp`: 000000000014FDF4
 - Value of `rsp`: 0000005000000000

`shr eax, 3`
 - Shifts right eax by 3
 - 50 >> 3 = A
 - New value of `rax`: 000000000000000A
  
`mov dword ptr [rsp+8], eax`
 - Moves `rax` value into the `rsp` value with an offset of 8
 - Address of `rsp`: 000000000014FDF8
 - Value of `rsp` (4 bytes): 0000000A

`mov eax, dword ptr [rsp+8]`
 - Moves the `rsp` value with an offset of 8 into `rax` register
 - Address of `rsp`: 000000000014FDF8
 - Value of `rsp` (4 bytes): 0000000A

`add rsp, 18h`
 - `rsp`: 000000000014FDF0 + 18 = 000000000014FE08

 `ret`
  - Returns and continues the statement at `ShiftExample1.exe!invoke_main(void)`
  - `rsp`: 000000000014FE08 + 8 = 000000000014FE10
<hr>