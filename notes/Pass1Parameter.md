## Pass1Parameter.c

### Source Code:

```c
int func(int a) {
    int i = a;
    return i;
}

int main() {
	return func(0x41414141);
}
```

### Disassembly:

#### Frame 1: Pass1Parameter.exe!func(...)
```assembly
mov dword ptr [rsp+8], ecx
sub rsp, 18h
mov eax, dword ptr [rsp+20h]
mov dword ptr [rsp], eax
mov eax, dword ptr [rsp]
add rsp, 18h
ret
```

#### Frame 2: Pass1Parameter.exe!main(...)
```assembly
sub rsp 28h
mov ecx, 41414141h
call func 0000000140001000
add, rsp 28h
ret
```

## Analyzing the stack

|Address|Value|
|-------------|-------------|
|0x000000000014FE08|0000000140001349 -> RETURN ADDRESS to `Pass1Parameter.exe!invoke_main(void)`|
|0x000000000014FE00|16-byte-stack-alignment-padding|
|0x000000000014FDF8|undef|
|0x000000000014FDF0|undef|
|0x000000000014FDE8|undef|
|0x000000000014FDE0|0000000141414141 -> Parameter value from func()|
|0x000000000014FDD8|000000014000102e -> RETURN ADDRESS to `Pass1Parameter.exe!main(...)`|
|0x000000000014FDD0|16-byte-stack-alignment-padding|
|0x000000000014FDC8|16-byte-stack-alignment-padding|
|0x000000000014FDC0|0000000041414141 -> int i = 0x41414141; |

## Breaking down each statements

<i>By setting the breakpoint at `main()`, the current RSP 000000000014FE08 contains an address value which returns back to `Pass1Parameter.exe!invoke_main(void)`.</i>

### Frame 1: Pass1Parameter.exe!main(...)

`sub rsp, 28h`
 - `rsp`: 000000000014FE08 - 28 = 000000000014FDE0

 `mov ecx, 41414141h`
  - Moves 0x41414141 into `rcx` register

`call func 0140001000h`
 - Proceeds to `Pass1Parameter.exe!func(...)`
 - Adds a return address on 000000000014FDD8
 - `rsp`: 000000000014FDE0 - 8  = 000000000014FDD8

`add rsp, 28h`
 - `rsp`: 000000000014FDE0 + 28 = 000000000014FE08

 `ret`
  - Returns and continues the statement at `Pass1Parameter.exe!invoke_main(void)`
  - `rsp`: 000000000014FE08 + 8 = 000000000014FE10
<hr>

### Frame 2: Pass1Parameter.exe!func(...)

`mov dword ptr [rsp+8], ecx`
 - Moves 0x41414141 into `rsp` register

`sub rsp, 18h`
 - `rsp`: 000000000014FDD8 - 18 = 0x000000000014FDC0

`mov eax, dword ptr[rsp+20h]`
 - Moves the value of `[rsp+20h]` into `rax` register
 - `rax`: 0000000041414141

`mov dword ptr [rsp], eax`
 - Moves the value of `rax` into `rsp` register
 
`mov eax, dword ptr[rsp]`
 - Moves the value of `rsp` into `rax` register
 - `rax`: 0000000041414141

`add rsp, 18h`
 - `rsp`: 000000000014FDC0 + 18 = 0x000000000014FDD8

`ret`
  - Returns and continues the statement at `Pass1Parameter.exe!main(...)`
  - `rsp`: 000000000014FDD8 + 8 = 000000000014FDE0